!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.NoiseMap=e()}(this,function(){"use strict";const t=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],e=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6;var i=[],r=[{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:-1},{x:Math.SQRT1_2,y:Math.SQRT1_2},{x:-Math.SQRT1_2,y:Math.SQRT1_2},{x:Math.SQRT1_2,y:-Math.SQRT1_2},{x:-Math.SQRT1_2,y:-Math.SQRT1_2}];function a(t,e,n,i,r,a,o){let h=new Array(t*e),l=0,s=99999,u=-99999,f=0,c=0,g=0,d=0,p=0,y=0;for(d=0;d<t;d++)for(p=0;p<e;p++){for(f=n,c=r,g=0,y=0;y<5;y++)l=o(d/(t*c),p/(e*c)),s=Math.min(l,s),u=Math.max(l,u),g+=f*l,f*=i,c*=a;h[d+p*t]=g}return h}function o(t,e){let n,a=Math.floor(t),o=Math.floor(e),h=t-a,u=e-o,f=(n=r[7&i[(a&=255)+i[o&=255]]]).x*h+n.y*u,c=(n=r[7&i[a+i[o+1]]]).x*h+n.y*(u-1),g=(n=r[7&i[a+1+i[o]]]).x*(h-1)+n.y*u,d=(n=r[7&i[a+1+i[o+1]]]).x*(h-1)+n.y*(u-1),p=l(h);return s(l(u),s(p,f,g),s(p,c,d))}function h(t,a){let o,h,l=(t+a)*e,s=Math.floor(t+l),u=Math.floor(a+l),f=t-s+(s+u)*n,c=a-u+(s+u)*n;f>c?(o=1,h=0):(o=0,h=1);let g=f-o+n,d=c-h+n,p=f-1+2*n,y=c-1+2*n,M=r[7&i[(s&=255)+i[u&=255]]],x=r[7&i[s+o+i[u+h]]],m=r[7&i[s+1+i[u+1]]],S=0,w=0,C=0,R=0;return 70*((S=(R=.5-f*f-c*c)<0?0:(R*=R)*R*(M.x*f+M.y*c))+(w=(R=.5-g*g-d*d)<0?0:(R*=R)*R*(x.x*g+x.y*d))+(C=(R=.5-p*p-y*y)<0?0:(R*=R)*R*(m.x*p+m.y*y)))}function l(t){return t*t*t*(t*(6*t-15)+10)}function s(t,e,n){return(1-t)*e+t*n}function u(t,e,n,i,r){return i+(r-i)*(t-e)/(n-e)}function MapGenerator(t){this.seed=null,this.config={amplitude:1,frequency:.5,amplitudeCoef:.5,frequencyCoef:.5,generateSeed:!1},this.setSeed(t)}function HeightMap(t,e,n){this.width=t,this.height=e,this.size=this.width*this.height,this.data=n,this.colorMap=null}MapGenerator.prototype={setSeed:function(e){let n=parseInt(e)||Math.random();n<0&&(n*=-1),n>0&&n<1&&(n*=65536),n<256&&(n|=n<<8),this.seed=n,function(e){i=new Array(512);let n=0;for(let r=0;r<256;r++)n=1&r?t[r]^255&e:t[r]^e>>8&255,i[r]=i[r+256]=n}(this.seed)},setConfig:function(t){t=t||{};for(let e in this.config)t.hasOwnProperty(e)&&(this.config[e]=t[e])},new:function(t,e,n,i){i&&this.setConfig(i,this.baseConfig),this.config.generateSeed&&this.setSeed();let r="perlin"==n?o:h,l=this.config,s=a(t,e,l.amplitude,l.amplitudeCoef,l.frequency,l.frequencyCoef,r),f=Math.min.apply(null,s),c=Math.max.apply(null,s);return new HeightMap(t,e,s=s.map(function(t){return u(t,f,c,0,1)}))}},HeightMap.prototype={getData:function(t,e){return e>=0&&e<this.height&&t>=0&&t<this.width?this.data[e*this.width+t]:null},scaleValues:function(t){var e=Math.max(Math.min(t,2),.5);1!=e&&(this.data=this.data.map(function(t){return Math.pow(t,e)}))},stepValues:function(t){let e=Math.max(Math.min(t,100),1);e>1&&(this.data=this.data.map(function(t){return Math.round(t*e)/e}))},inverseValues:function(){this.data=this.data.map(function(t){return 1-t})},draw(t,e,n,i,r){let a=Math.ceil(e/this.width),o=Math.ceil(n/this.height),h=d.new(i),l=!!r;for(let e=0;e<this.width;e++)for(let n=0;n<this.height;n++)t.fillStyle=h.getColor(this.getData(e,n)),t.fillRect(e*a,n*o,a,o),l&&(t.fillStyle=this.getShadowColor(e,n),t.fillRect(e*a,n*o,a,o))},getShadowColor:function(t,e){let n=0,i=this.getData(t,e);return i>=.5&&(this.getData(t-1,e)>i&&(n+=.01),this.getData(t,e-1)>i&&(n+=.02),this.getData(t-1,e-1)>i&&(n+=.03)),"rgba(0,0,0,"+String(n)+")"}};const f={R:[[0,2],[63,9],[126,17],[127,69],[128,42],[191,115],[225,153],[250,179],[255,255]],G:[[0,43],[63,62],[126,82],[127,108],[128,102],[191,128],[225,143],[250,179],[255,255]],B:[[0,68],[63,92],[126,112],[127,118],[128,41],[191,77],[225,92],[250,179],[255,255]]},c={R:[[0,94],[126,66],[127,77],[128,86],[160,207],[191,254],[223,247],[255,182]],G:[[0,79],[126,138],[127,163],[128,173],[160,236],[191,235],[223,137],[255,28]],B:[[0,162],[126,181],[127,177],[128,174],[160,158],[191,159],[223,81],[255,71]]},g={R:[[0,10],[126,73],[127,109],[128,29],[160,107],[191,254],[223,207],[255,67]],G:[[0,0],[126,186],[127,219],[128,160],[160,138],[191,245],[223,131],[255,40]],B:[[0,79],[126,184],[127,184],[128,108],[160,44],[191,176],[223,55],[255,19]]};var d={new:function(t){let e=null;switch(t){case"real":e=function(t){return d.getColor(t,f)};break;case"heat":e=function(t){return d.getColor(t,c)};break;case"geo":e=function(t){return d.getColor(t,g)};break;default:t="gray",e=function(t){return"hsl(0,0%,"+String(100*t)+"%)"}}return{style:t,getColor:e}},getColor:function(t,e){return"rgb("+d.interpolate(255*t,e.R)+","+d.interpolate(255*t,e.G)+","+d.interpolate(255*t,e.B)+")"},interpolate:function(t,e){for(let n=0;n<e.length;n++){if(t==e[n][0])return e[n][1];if(t<e[n][0]){let i=e[n-1],r=e[n];return Math.floor(u(t,i[0],r[0],i[1],r[1]))}}return array[array.length-1][1]}};return{generateNoise:a,perlinNoise:o,simlexNoise:h,MapGenerator:MapGenerator,HeightMap:HeightMap}});
